"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5134],{55134:function(n,e,t){t.d(e,{Z:function(){return Y}});var r=t(85893),i=t(67294),o=t(19521),l=t(86896),a=t(11163),u=t(96348),c=t(92116),s=t(59365),f=t(64873),d=t(39501),h=t(74961),g=t(34372),p=t(50262),m=t(70236),b=t(70147),x=t(86588),v=t(25675),y=t.n(v),w=t(63750);function j(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function C(){var n=j(["\n  margin-top: 30px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: ",";\n"]);return C=function(){return n},n}function M(){var n=j([""]);return M=function(){return n},n}function P(){var n=j(["\n  font-family: ",";\n"]);return P=function(){return n},n}function k(){var n=j(["\n  font-size: 20px;\n  line-height: 16px;\n\n  color: ",";\n  margin-top: 20px;\n"]);return k=function(){return n},n}function S(){var n=j(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  margin-top: 8px;\n\n  width: 100%;\n"]);return S=function(){return n},n}function O(){var n=j(["\n  font-size: 16px;\n  line-height: 16px;\n\n  color: ",";\n\n  margin-bottom: 10px;\n"]);return O=function(){return n},n}function z(){var n=j(["\n  margin-top: 10px;\n  display: flex;\n\n  align-items: center;\n  justify-content: center;\n  border: none;\n  background-color: ",";\n\n  color: ",";\n\n  font-family: ",";\n\n  font-size: 14px;\n\n  border-radius: 20px;\n  width: 200px;\n\n  height: 30px;\n  cursor: pointer;\n"]);return z=function(){return n},n}function Z(){var n=j(["\n  margin-left: 5px;\n"]);return Z=function(){return n},n}var L=function(n){var e=n.isFetching,t=n.moveToScheduledCalls,i=(0,l.Z)(),a=(0,o.Fg)();return(0,r.jsx)(I,{children:e?(0,r.jsx)(x.iT,{wrapperStyle:{justifyContent:"center"},width:30,color:"white",ariaLabel:"loading"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T,{src:"/images/fox-finding.svg",width:300,height:200}),(0,r.jsx)(A,{children:i.formatMessage({id:"there-are-no-tables"})}),(0,r.jsxs)(E,{children:[(0,r.jsx)(q,{children:i.formatMessage({id:"explore-other-tables"})}),(0,r.jsxs)(N,{onClick:t,children:[i.formatMessage({id:"explore-more-tables"}),(0,r.jsx)(R,{size:16,color:a.colors.s1})]})]})]})})},I=o.ZP.div(C(),(function(n){var e=n.containerHeight;return e?"".concat(e,"px"):""})),T=(0,o.ZP)(y())(M()),F=o.ZP.span(P(),(function(n){return n.theme.wfont.NunitoSansRegular})),A=(0,o.ZP)(F)(k(),(function(n){return n.theme.colors.p1})),E=o.ZP.div(S()),q=(0,o.ZP)(F)(O(),(function(n){return n.theme.colors.s1})),N=o.ZP.button(z(),(function(n){return n.theme.colors.p1}),(function(n){return n.theme.colors.s1}),(function(n){return n.theme.wfont.NunitoSansRegular})),R=(0,o.ZP)(w.lzl)(Z()),_=i.memo(L),H=t(57040),U=t(57893),W=t(246),D=t.n(W);function G(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function J(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function V(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function X(n){return function(n){if(Array.isArray(n))return G(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"===typeof n)return G(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return G(n,e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(){var n=V(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: 1400px;\n  padding-bottom: ",";\n  width: ",";\n  height: ",";\n"]);return $=function(){return n},n}function B(){var n=V(["\n  width: ",";\n\n  height: ",";\n  overflow-x: auto;\n  display: flex;\n  flex-direction: ",";\n\n  @media (max-height: ","px) {\n    height: 680px;\n  }\n\n  &::-webkit-scrollbar {\n    padding-top: 10px;\n    width: 100%;\n\n    border-radius: 10px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    width: 20%;\n    height: 10px;\n    background-color: ",";\n    border-radius: 10px;\n  }\n"]);return B=function(){return n},n}var K=h.utils.cafe.useCafesForCurrentUser,Q=h.utils.paidCall.useCheckUserPaidCall,Y=function(n){var e=n.cardWidth,t=n.horizontal,o=n.isEnableFilters,h=n.language,x=n.containerHeight,v=n.onClickListen,y=n.loginProps,w=(0,l.Z)(),j=(0,a.useRouter)(),C=(0,s.r)(),M=C.onJoin,P=C.requestedCallId,k=(0,c.useAvailableGroupCallList)({transcriptionLang:h}),S=k.isFetching,O=k.data,z=(0,i.useRef)(null),Z=(0,i.useRef)(null),L=(0,i.useState)("all"),I=L[0],T=L[1],F=(0,i.useContext)(f.fm),A=null===F||void 0===F?void 0:F.userProfile,E=(0,i.useState)("language"),q=E[0],N=E[1],R=(0,U.useFollowingList)().followingUserIds,W=K().data,G=(0,H.sX)().onOpenLoginModal,V=null!=A&&1==A.finishedOnboarding,$=(0,i.useCallback)((function(){G(y.redirect,y.from)}),[G,y]),B=(0,i.useCallback)((function(n){null!=n&&T(n)}),[]),Y=(0,i.useMemo)((function(){return O||[]}),[O]),tn=Q().data,rn=(0,d.e_)(),on=(0,i.useState)(null),ln=on[0],an=on[1],un=(0,i.useCallback)((function(n){an(n)}),[]),cn=(0,u.nu)();(0,i.useEffect)((function(){j&&j.query&&j.query.language&&(T(j.query.language),j.replace(j.pathname,void 0,{shallow:!0}))}),[j]);var sn=(0,i.useCallback)((function(n){N(n)}),[]),fn=(0,i.useMemo)((function(){var n=[],e=[];if(Y.length>0){var t=Y.map((function(n,e){return{count:1,id:e+1,label:n.transcriptionLang,type:"language"}})),r={count:Y.length,id:0,label:"all",type:"all"};n=X(t.reduce((function(n,e){return n.has(e.label)||n.set(e.label,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){J(n,e,t[e])}))}return n}({},e,{count:0})),n.get(e.label).count++,n}),new Map).values()),e=n.sort((function(n,e){return e.count-n.count}));var i=(null===A||void 0===A?void 0:A.nativeLang)||null,o=(null===A||void 0===A?void 0:A.targetLang)||null,l=e.findIndex((function(n){return n.type===i}));if(l>=0){var a=e.splice(l,1);e=a.concat(e)}var u=e.findIndex((function(n){return n.type===o}));if(u>=0){var c=e.splice(u,1);e=c.concat(e)}e.unshift(r)}return e}),[Y,A]),dn=(0,i.useMemo)((function(){return 0===Y.length?[]:Y.filter((function(n){return n.hasFollower}))}),[Y]),hn=(0,i.useMemo)((function(){return 0===Y.length?[]:Y.filter((function(n){return n.isTrainerTable&&R.has(n.creatorId)}))}),[Y,R]),gn=(0,i.useMemo)((function(){var n;if(0===Y.length)n=[];else{var e=null===W||void 0===W?void 0:W.map((function(n){return n.cafe.id}));n=Y.filter((function(n){if(e&&n.cafeId)return e.includes(n.cafeId)}))}return n}),[Y,W]),pn=(0,i.useMemo)((function(){return 0===Y.length?[]:Y.filter((function(n){return(n.isVerifiedTeacherTable||n.isTrainerTable)&&n.cafeId||n.allowPaid}))}),[Y]),mn=(0,i.useMemo)((function(){return 0===Y.length?[]:Y.filter((function(n){return n.isPrivateTable}))}),[Y]),bn=(0,i.useMemo)((function(){var n;if(n="language"===q&&I?"all"===I?Y:Y.filter((function(n){return I===n.transcriptionLang})):"following"===q?dn:"trainers"===q?hn:"cafes"===q?gn:"lesson"===q?pn:"private"===q?mn:Y,null!=P){var e=n.map((function(n){return n.id})).indexOf(P);if(e>-1){var t=n.splice(e,1)[0];n.unshift(t)}}return n}),[Y,I,P,q,dn,gn,pn,mn,hn]),xn=(0,i.useCallback)((function(n){V?cn?bn&&M(n):(v&&v({type:"groupCall",id:n}),$()):G()}),[cn,M,$,bn,G,v,V]),vn=(0,i.useCallback)((function(){Z.current&&z.current&&(z.current.scrollLeft+=5,requestAnimationFrame(vn))}),[]),yn=(0,i.useCallback)((function(){j.push("/lobby/schedule")}),[j]),wn=(0,i.useMemo)((function(){return[{id:1,label:w.formatMessage({id:"all-languages"}),type:"language",count:Y.length},{id:2,label:w.formatMessage({id:"lesson"}),type:"lesson",count:pn.length},{id:3,label:w.formatMessage({id:"following"}),type:"following",count:dn.length},{id:4,label:w.formatMessage({id:"my-trainer"}),type:"trainers",count:hn.length},{id:5,label:w.formatMessage({id:"my-cafes-text"}),type:"cafes",count:gn.length},{id:6,label:w.formatMessage({id:"private"}),type:"private",count:mn.length}]}),[w,pn,dn,gn,mn,hn,Y]),jn=(0,i.useState)(!0),Cn=jn[0],Mn=jn[1],Pn=(0,i.useState)(10),kn=Pn[0],Sn=Pn[1],On=(0,i.useCallback)((function(n,t){var o=!!n.scheduledCallId&&(!!tn&&tn.includes(n.scheduledCallId));return(0,r.jsxs)(i.Fragment,{children:[t>0&&t%10===0?(0,r.jsx)(m.Z,{}):null,(0,r.jsx)(g.ZP,{cardWidth:e,item:n,disabled:!1,onPressConnect:function(){xn(n.id)},onOpenDetailMenu:function(n){cn?un(n):$()},onShowPaidModal:function(){rn({paidCallId:n.id})},isAlreadyPaid:o})]},n.id)}),[e,xn,un,cn,$,rn,tn]),zn=(0,i.useCallback)((function(n){for(var e=[],t=0;t<kn;t++)n[t]&&e.push(On(n[t],t));return e}),[kn,On]),Zn=(0,i.useState)(10),Ln=Zn[0],In=Zn[1],Tn=(0,i.useCallback)((function(){In((function(n){return n+10}))}),[]);return(0,r.jsxs)(nn,{horizontal:t,containerHeight:x,children:[null!==ln&&(0,r.jsx)(b.Z,{item:ln,onClose:function(){an(null)},onListen:function(){xn(ln.id)}}),o?(0,r.jsx)(p.k,{horizontal:t,onChangeFilter:sn,onToggleSelectedLanguage:B,filters:wn,languages:fn,showAd:!t}):null,bn.length>0?(0,r.jsx)(en,{horizontal:t,children:t?bn.slice(0,Ln).map((function(n,e){return On(n,e)})).concat((0,r.jsx)("button",{onClick:Tn,children:"Load More"})):(0,r.jsx)(D(),{pageStart:0,loadMore:function(){kn===bn.length?Mn(!1):setTimeout((function(){Sn(kn+10)}),500)},hasMore:Cn,loader:(0,r.jsx)("h4",{className:"loader",children:"Loading..."}),useWindow:!1,children:zn(bn)})}):(0,r.jsx)(_,{isFetching:S,moveToScheduledCalls:yn})]})},nn=o.ZP.div($(),(function(n){return n.horizontal?"20px":""}),(function(n){return n.horizontal?"100%":"470px"}),(function(n){var e=n.horizontal,t=n.containerHeight;return e?"".concat(t,"px"):""})),en=o.ZP.div(B(),(function(n){return n.horizontal?"90%":"100%"}),(function(n){return n.horizontal?"":"calc(100vh - ".concat(118,"px)")}),(function(n){return n.horizontal?"row":"column"}),680,(function(n){return n.theme.colors.s4}))}}]);